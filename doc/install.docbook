<chapter id="installpev">
<title>Obtendo e instalando o pev</title>

<para>
Você pode baixar os binários do pev já prontos para funcionarem! Damos
a esses binários os nomes de pré-compilados, pois eles são entergues à
você assim, já compilados. Essa é a maneira mais fácil de começar a usar
o pev, no entanto, caso sinta-se confortável, você também está convidado
a baixar o código fonte do pev e compilá-lo em seu ambiente, mas isso irá
exigir que você instale primeiro as dependências de compilação e os programas
para realizar tal trabalho.
</para>

<para>
Se optar pela primeira forma, basta baixar o pacote correto para a sua
arquitetura. São fornecidos pacotes ZIP com os binários para Windows x86
(que também funcionam em versões do Windows de 64-bits), pacotes pré-compilados
para GNU/Linux (DEB e RPM) também x86 e x86-64 e para Mac OS X.
</para>

<para>
Além disso, é possível que usuários GNU/Linux se beneficiem do sistema de
repositório de pacotes para instalar o pev. Sabemos que usuários do Debian,
Ubuntu, Slackware e Arch GNU/Linux já possuem pacotes para o pev, além do projeto MacPorts,
para Mac OS X. Apenas verifiquem se eles estão com a última versão do kit.
</para>

<section id="binary">
<title>A partir de binários pré-compilados</title>

<section id="binlinux">
<title>No GNU/Linux</title>
<para>
A instalação de pacotes pré-compilados no GNU/Linux pode ser feita de duas formas:
obtendo o pacote .deb ou .rpm em nosso site ou pelo repositório de sua
distribuição (há pacotes no Slackware, Debian, Backtrack, Ubuntu e outros).
</para>

<para>
Para instalação do pacote .deb, faça:
</para>

<screen>
<prompt>$ </prompt><command>sudo dpkg -i pev-x.xx.deb</command>
</screen>

<para>
Para instalação do pacote .rpm, faça:
</para>

<screen>
<prompt>$ </prompt><command>sudo rpm -i pev-x.xx.rpm</command>
</screen>

<para>Para instalação a partir do repositório de sua distribuição,
por favor, cheque a documentação da mesma.</para>

</section>

<section id="binwin">
<title>No Windows</title>
<para>Basta baixar o .zip da versão para Win32, descompactar para uma
pasta e os binários estarão prontos para uso.</para>

</section>

<section id="binmac">
<title>No Mac OS X</title>
<para>No OS X você pode instalar o .pkg fornecido ou, para usuários do
<ulink url="http://www.macports.org/">macports</ulink>, comandar no
terminal:</para>

<screen>
<prompt>$ </prompt><command>sudo port install pev</command>
</screen>

</section>

</section>

<section id="source">
<title>A partir do código-fonte</title>

<para>
Acesse <ulink url="http://pev.sourceforge.net" />, clique em
Download e baixe o tarball pev-x.xx.tar.gz, onde x.xx é o número de versão.
</para>

<para>Alternativamente, você pode obter o código-fonte da versão mais recente em
desenvolvimento a partir do <ulink url="https://github.com/merces/pev">
repositório git do pev no GitHub</ulink> (recomendado). Se tiver o git instalado,
pode clonar nosso respositório com:</para>

<prompt>$ </prompt> <command>git clone --recursive git://github.com/merces/pev.git</command>

<para>Mesmo sem o git instalado, é possível fazer download do código do
repositório num arquivo .zip ou .tar.gz, através do GitHub.</para>

<section id="complinux">
<title>Compilando no GNU/Linux</title>

<para>
Certifique-se de que os seguintes programas estão instalados e funcionando
corretamente:
</para>

<simplelist>
<member><ulink url="https://github.com/merces/libpe">libpe</ulink> (inclusa se você clonou o repositório git do pev com a oção --recursive do git)</member>
<member>libssl (usada no pehash e pesec)</member>
<member>libpcre (usada no pestr)</member>
<member>gcc</member>
<member>make</member>
</simplelist>

<para>Se você baixou o tarball, descompacte-o com o tar:</para>

<screen>
<prompt>$ </prompt><command>tar xf pev-x.xx.tar.gz</command>
<prompt>$ </prompt><command>cd pev-x.xx</command>
</screen>
<para>Se clonou o respositório git pode entrar no diretório e ir direto para a
etapa de compilação:</para>

<screen>
<prompt>$ </prompt><command>make</command>
<prompt># </prompt><command>make install</command> (com sudo ou com privilégios administrativos)
</screen>

<para>Os comandos acima vão compilar a libpe e todos os binários do pev. Você também pode
definir as variáveis DEST e PREFIX caso precise. Caso queira compilar somente a libpe, faça:
</para>

<screen>
<prompt>$ </prompt><command>cd lib/libpe</command>
<prompt>$ </prompt><command>make</command>
</screen>

<para>Para compilar binários individuais do kit pev:</para>
<screen>
<prompt>$ </prompt><command>cd src/</command>
<prompt>$ </prompt><command>make <replaceable>programa</replaceable></command>
</screen>

<para>Note, no entanto, que para compilar um programa individualmente você deve compilar
a libpe antes.</para>

</section>

<section id="compwin">
<title>Compilando no Windows (via Cygwin)</title>

<para>O primeiro passo é obter e instalar o <ulink
url="http://cygwin.com/">Cygwin</ulink>. Na instalação, os seguintes pacotes
devem ser selecionados:</para>

<simplelist>
<member>gcc (para versões de 32-bits)</member>
<member>binutils</member>
<member>make</member>
<member>zip</member>
<member>openssl-devel (usada no pehash e no pesec)</member>
<member>libpcre-devel (usada no pestr)</member>
</simplelist>

<para>Após a instalação dos pacotes, os mesmos passos de compilação no GNU/Linux
devem ser seguidos, com exceceção do make install, que é substituído por:</para>

<screen>
<prompt>$ </prompt><command>make zip</command>
</screen>

<para>O arquivo <emphasis>pev-x.xx.zip</emphasis> será gerado no diretório atual e poderá ser
descompactado em qualquer diretório de sua escolha. Todas as ferramentas do
kit podem ser executadas diretamente, contanto que a libpe.dll e as bibliotecas
do Cygwin (cyg*.dll) estejam no mesmo diretório ou em algum diretório da
variável %PATH% do Windows.</para>

<para>Você não pode usar outros targets do Makefile (como make install) no Cygwin</para>. Após
criar o arquivo ZIP você não precisa mais do Cygwin para rodar o pev. Uma vez que as DLLs
do Cygwin são distribuídas junto ao arquivo ZIP, você pode rodá-lo nativamente em qualquer
versão recente do Windows.

</section>

<section id="composx">
<title>Compilando no Mac OS X</title>
<para>Para compilar o pev no Apple OS X (antigo MacOS), recomendamos que seja utilizado um
dos seguintes gerenciadores de pacotes:</para>

<simplelist>
<member>MacPorts - http://www.macports.org</member>
<member>Homebrew - http://mxcl.github.com/homebrew</member>
</simplelist>

<para>Se optar pelo MacPorts, você pode instalar as dependências e compilar o pev assim:</para>

<screen>
<prompt>$ </prompt><command>sudo port install pcre</command>
<prompt>$ </prompt><command>make CFLAGS="-I/opt/local/include"</command>
</screen>

<para>Usando o Homebrew, faça assim:</para>

<screen>
<prompt>$ </prompt><command>brew install pcre</command>
<prompt>$ </prompt><command>make CFLAGS="-I/opt/local/include"</command>
</screen>

<para>Os diretórios acima podem mudar dependendo da instalação do seu gerenciador de pacotes.</para>

</section>

<section id="compother">
<title>Compilando em outras plataformas</title>

<para>É possível que várias ferramentas do pev possam ser compiladas para
outras plataformas, principalmente porque tanto a libpe quanto as próprias
ferramentas são escritos em C seguindo a norma ISO C99, então basta que o
compilador utilizado tenha suporte para as chances de compilar sem patches
aumentarem bastante.</para>

<para>Versões anteriores do pev já foram compiladas para Android e Solaris, mas
a versão corrente ainda não. Se conseguir compilar para alguma plataforma
diferente, por favor nos avise. Ficaremos agradecidos.</para>
</section>

<section id="compat">
<title>Retrocompatibilidade de saída</title>
<para>Na versão 0.70 o formato de saída do peres e do readpe foram sofreram
alterações. Caso precise trabalhar com o formato anterior, até a versão 0.60, você
pode compilar estes programas definindo a flag LIBPE_ENABLE_OUTPUT_COMPAT_WITH_V06,
como no exemplo:</para>

<screen>
<prompt>$ </prompt><command>DFLAGS+=-DLIBPE_ENABLE_OUTPUT_COMPAT_WITH_V06 make readpe</command>
</screen>
</section>

</section>

</chapter>
